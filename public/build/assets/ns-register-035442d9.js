import{j as b,v as x}from"./print-626e5240.js";import{n as i,a as d}from"./bootstrap-c074a314.js";import{_ as f}from"./lang-15e8d12f.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{r as l,o as t,c as n,b as s,F as y,e as F,h as T,f as m,g as _,t as u,w as V,j as X}from"./runtime-core.esm-bundler-b720315f.js";import"./currency-5dcbb44b.js";import"./runtime-dom.esm-bundler-a40dbb0d.js";import"./chart-853d44d7.js";const w={name:"ns-register",data(){return{fields:[],xXsrfToken:null,validation:new b}},mounted(){x([i.get("/api/fields/ns.register"),i.get("/sanctum/csrf-cookie")]).subscribe(o=>{this.fields=this.validation.createFields(o[0]),this.xXsrfToken=i.response.config.headers["X-XSRF-TOKEN"],setTimeout(()=>nsHooks.doAction("ns-register-mounted",this))})},methods:{__:f,register(){if(!this.validation.validateFields(this.fields))return d.error(f("Unable to proceed the form is not valid."));this.validation.disableFields(this.fields),nsHooks.applyFilters("ns-register-submit",!0)&&i.post("/auth/sign-up",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe({next:e=>{d.success(e.message),setTimeout(()=>{document.location=e.data.redirectTo},1500)},error:e=>{this.validation.triggerFieldsErrors(this.fields,e),this.validation.enableFields(this.fields),d.error(e.message)}})}}},N={class:"ns-box rounded shadow overflow-hidden transition-all duration-100"},j={class:"ns-box-body"},B={class:"p-3 -my-2"},C={key:0,class:"py-2 fade-in-entrance anim-duration-300"},E={key:0,class:"flex items-center justify-center"},R={class:"flex w-full items-center justify-center py-4"},S={href:"/sign-in",class:"link hover:underline text-blue-600 text-sm"},H={class:"flex ns-box-footer border-t justify-end items-center p-3"};function A(o,e,K,O,r,a){const h=l("ns-field"),p=l("ns-spinner"),g=l("ns-button");return t(),n("div",N,[s("div",j,[s("div",B,[r.fields.length>0?(t(),n("div",C,[(t(!0),n(y,null,F(r.fields,(c,v)=>(t(),T(h,{key:v,field:c},null,8,["field"]))),128))])):m("",!0)]),r.fields.length===0?(t(),n("div",E,[_(p)])):m("",!0),s("div",R,[s("a",S,u(a.__("Already registered ?")),1)])]),s("div",H,[s("div",null,[_(g,{onClick:e[0]||(e[0]=c=>a.register()),type:"info"},{default:V(()=>[X(u(a.__("Register")),1)]),_:1})])])])}const M=k(w,[["render",A]]);export{M as default};
